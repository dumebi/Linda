<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Linda: C:/Apache24/htdocs/easygo2/Lib/Linda/Linda.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Linda
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Linda ORM and Database Abstraction Layer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_c_1_2_apache24_2htdocs_2easygo2_2_lib_2_linda_2_linda_8php-example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Apache24/htdocs/easygo2/Lib/Linda/Linda.php</div>  </div>
</div><!--header-->
<div class="contents">
<p>The get method fetches data from the table </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">array()</td><td>| string $feilds An associative array containing fields to get from the table, or the string * </td></tr>
    <tr><td class="paramname">array()</td><td>$queryConfig A configuration array, that contains option for the get operation</td></tr>
  </table>
  </dd>
</dl>
<p>$queryConfig = array( </p><pre class="fragment">               "whereGroup" =&gt; array(  
                 [
                     "actor_id"=&gt;array("value"=&gt;5, "operator"=&gt;"="),
                    "last_name"=&gt;array("value"=&gt;"'%ER", "operator"=&gt;"LIKE"),
                    "comparisonOp"=&gt;"AND",
                    "nextOp"=&gt;"OR"
</pre><p> ],</p>
<p>[ "actor_id"=&gt;array("value"=&gt;"last_name", "operator"=&gt;"LIKE")</p>
<p>] , "comparisonOp"=&gt;"OR" )</p>
<pre class="fragment">                  "where_in"=&gt;array(
                         fieldName =&gt; "id",
                         options =&gt; " 10, 15, 22,
                           query =&gt; "",
                          operator = &gt; "AND"

                      ),

                 "innerJoinGroup" =&gt; array(
                   [
                   table =&gt; "table_name",
                   conditional_column_a =&gt; "column name" 
                   conditional_column_b =&gt; "column name" 
                   ],
                   [
                 table =&gt; "table_name",
                   conditional_column =&gt; "column name" 
                   ]


                 ) 

                  "limit" =&gt;[
                           index =&gt; 2,
                           count =&gt;18

                         ],</pre><div class="fragment"><div class="line">&lt;?php</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Linda is a Database Abstraction Layer </span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">require_once <span class="stringliteral">&#39;StringHelper.php&#39;</span>;</div>
<div class="line"></div>
<div class="line">include_once <span class="stringliteral">&#39;Linda.inc&#39;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span><a name="_a0"></a><a class="code" href="class_linda.html">Linda</a> {</div>
<div class="line"></div>
<div class="line">    <span class="keyword">protected</span> <a name="a1"></a><a class="code" href="class_linda.html#a5fb90da401a0606ea940e908e3243e5a">$Linda_ERROR</a> = NULL;</div>
<div class="line">    <span class="keyword">protected</span> <a name="a2"></a><a class="code" href="class_linda.html#a11c2781ac527a1c951d9035f2d0197cc">$DB_LINK</a>;</div>
<div class="line">    <span class="keyword">protected</span> <a name="a3"></a><a class="code" href="class_linda.html#a486c281995ea6cdb9fb0367b6e260b76">$TABLE_MODEL</a>;</div>
<div class="line">    <span class="keyword">public</span> <a name="a4"></a><a class="code" href="class_linda.html#a5ed9b689dc54a1e48103d904af6885a5">$CURRENT_QUERY</a>;</div>
<div class="line">    <span class="keyword">protected</span> <a name="a5"></a><a class="code" href="class_linda.html#a97365f1875db5efbdefc5faa71249ff1">$DEFAULT_LIMIT</a> = 1000;</div>
<div class="line">    <span class="keyword">protected</span> <a name="a6"></a><a class="code" href="class_linda.html#a803cce07cc3e3f9937b6e5faba4100fe">$DEFAULT_START_INDEX</a> = 0;</div>
<div class="line">    <span class="keyword">protected</span> <a name="a7"></a><a class="code" href="class_linda.html#a64270a514fbca17fe7347df6320fc4ba">$resultObject</a> = NULL;</div>
<div class="line">    <span class="keyword">protected</span> <a name="a8"></a><a class="code" href="class_linda.html#a038edab690e03aff9c70a1f63c06f27e">$lastAffectedRowCount</a> = 0;</div>
<div class="line">    <span class="keyword">protected</span> <a name="a9"></a><a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a> = array();</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <a name="a10"></a><a class="code" href="class_linda.html#a4771733014ade9011a85f4d01b24f2fe">Linda_DB_HOST</a> = <a name="a11"></a><a class="code" href="_linda_8inc.html#a04fe7b2183696117c547ebd489887469">Linda_HOST</a>;</div>
<div class="line">    <span class="keyword">const</span> <a name="a12"></a><a class="code" href="class_linda.html#aab80e54270eaebb370e54ec5232be43a">Linda_DB_NAME</a> = <a name="a13"></a><a class="code" href="_linda_8inc.html#a63db632e582f1bfc77fa2e49266d2cb2">Linda_NAME</a>;</div>
<div class="line">    <span class="keyword">const</span> <a name="a14"></a><a class="code" href="class_linda.html#af392abe38a40b56515eb835fa3c39d8c">Linda_DB_TYPE</a> = <a name="a15"></a><a class="code" href="_linda_8inc.html#ad11963ded3220b11ce5131fb085b604c">Linda_TYPE</a>;</div>
<div class="line">    <span class="keyword">const</span> <a name="a16"></a><a class="code" href="class_linda.html#a73fe432dd03d1c21aa74940da5c04dc0">Linda_DB_USER</a> = <a name="a17"></a><a class="code" href="_linda_8inc.html#a649943f2ea6da11ff27d0ccbe3121ee5">Linda_USER</a>;</div>
<div class="line">    <span class="keyword">const</span> <a name="a18"></a><a class="code" href="class_linda.html#a392451b719cb6bb9b0c372832ad9e6d8">Linda_DB_PASSW</a> = <a name="a19"></a><a class="code" href="_linda_8inc.html#aae4e99575213bfc82a21b94a00231b0c">Linda_PASSW</a>;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a20"></a><a class="code" href="class_linda.html#a095c5d389db211932136b53f25f39685">__construct</a>() {</div>
<div class="line"></div>
<div class="line">        $this-&gt;initConnnection();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">   </div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a21"></a><a class="code" href="class_linda.html#aaded27ecadbc8530b9b21cbb38dfa4a8">setTable</a>($tableName) {</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (is_string($tableName))</div>
<div class="line">            $this-&gt;TABLE_MODEL = $tableName;</div>
<div class="line"></div>
<div class="line">       </div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">     <span class="comment">//+========================================================================================</span></div>
<div class="line">     <span class="keyword">protected</span> <span class="keyword">function</span> <a name="a22"></a><a class="code" href="class_linda.html#a3749f401c64588bfbecbcc3b2c1a24e4">parseModel</a>(){</div>
<div class="line">            </div>
<div class="line"></div>
<div class="line">        $sql = <span class="stringliteral">&quot;SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = :table&quot;</span>;</div>
<div class="line">        <span class="keywordflow">try</span> {</div>
<div class="line">            $core = <a class="code" href="class_linda.html#a11c2781ac527a1c951d9035f2d0197cc">$this-&gt;DB_LINK</a>;</div>
<div class="line">            $stmt = $core-&gt;prepare($sql);</div>
<div class="line">            $stmt-&gt;bindValue(<span class="stringliteral">&#39;:table&#39;</span>, $this-&gt;TABLE_MODEL, PDO::PARAM_STR);</div>
<div class="line">            $stmt-&gt;execute();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">while</span> ($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC)) {</div>
<div class="line">                $this-&gt;MODEL_SCHEMA[] = $row[<span class="stringliteral">&#39;COLUMN_NAME&#39;</span>];</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;MODEL_SCHEMA;</div>
<div class="line">        } <span class="keywordflow">catch</span> (PDOException $pe) {</div>
<div class="line">            trigger_error(<span class="stringliteral">&#39;Could not connect to MySQL database. &#39;</span> . $pe-&gt;getMessage(), E_USER_ERROR);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">   </div>
<div class="line"></div>
<div class="line"><span class="comment">//+=========================================================================================================</span></div>
<div class="line"></div>
<div class="line">    <span class="keyword">private</span> <span class="keyword">function</span> initConnnection() {</div>
<div class="line">        <span class="keywordflow">try</span> {</div>
<div class="line">            $this-&gt;DB_LINK = <span class="keyword">new</span> PDO(self::Linda_DB_TYPE . <span class="stringliteral">&#39;:host=&#39;</span> . self::Linda_DB_HOST . <span class="stringliteral">&#39;;dbname=&#39;</span> . self::Linda_DB_NAME, self::Linda_DB_USER, self::Linda_DB_PASSW, array(PDO::ATTR_PERSISTENT =&gt; <span class="keyword">true</span>));</div>
<div class="line"></div>
<div class="line">            $this-&gt;DB_LINK-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> TRUE;</div>
<div class="line">        } <span class="keywordflow">catch</span> (PDOException $pe) {</div>
<div class="line">            $this-&gt;Linda_ERROR = <span class="stringliteral">&quot;DB_CONNECT_ERROR&quot;</span>;</div>
<div class="line">            <span class="keywordflow">throw</span> $pe;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="comment">//+=========================================================================================================</span></div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a23"></a><a class="code" href="class_linda.html#a87d58413379d402e5dee4f5825b686fd">fetch</a>($fields, <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a> = array()) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;resultObject = null;</div>
<div class="line">        $this-&gt;<a name="a24"></a><a class="code" href="class_linda.html#aeb66ebf99ca730ea67c612735a6576b4">queryBuilder</a>(<span class="stringliteral">&quot;select&quot;</span>, $fields, <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>);</div>
<div class="line"></div>
<div class="line">        $this-&gt;<a name="a25"></a><a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line">        <span class="keywordflow">return</span> $this;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+=========================================================================================================</span></div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a26"></a><a class="code" href="class_linda.html#ac000dfba7a410bb147dc77571d1e2ed5">update</a>($fields, <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>) {</div>
<div class="line">        $this-&gt;resultObject = NULL;</div>
<div class="line"></div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#aeb66ebf99ca730ea67c612735a6576b4">queryBuilder</a>(<span class="stringliteral">&quot;update&quot;</span>, $fields, <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>);</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+=========================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a27"></a><a class="code" href="class_linda.html#af5a8f159a27ca700aa869092a5696be1">put</a>($fields, $values) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;resultObject = NULL;</div>
<div class="line">        $this-&gt;<a name="a28"></a><a class="code" href="class_linda.html#a190c686da9f77d10964e06f0480c9b44">createInsert</a>($fields, $values);</div>
<div class="line"></div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line">        <span class="keywordflow">return</span> $this;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+=========================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <span class="keyword">delete</span>(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>) {</div>
<div class="line">        $this-&gt;resultObject = null;</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#aeb66ebf99ca730ea67c612735a6576b4">queryBuilder</a>(<span class="stringliteral">&quot;delete&quot;</span>, null, <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>);</div>
<div class="line"></div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+======================================================+</span></div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">function</span> <a name="a29"></a><a class="code" href="class_linda.html#a0cee7c433eda5db6e7610d4e0dcedf99">sanitize</a>($inp) {<span class="comment">//escape values for database query</span></div>
<div class="line">        <span class="keywordflow">if</span> (is_array($inp))</div>
<div class="line">            <span class="keywordflow">return</span> array_map(__METHOD__, $inp);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(NULL === $inp){</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!empty($inp) &amp;&amp; is_string($inp) ) {</div>
<div class="line">            <span class="keywordflow">return</span> str_replace(array(<span class="charliteral">&#39;\\&#39;</span>, <span class="stringliteral">&quot;\0&quot;</span>, <span class="stringliteral">&quot;\n&quot;</span>, <span class="stringliteral">&quot;\r&quot;</span>, <span class="charliteral">&#39;&quot;&#39;</span>, <span class="stringliteral">&quot;\x1a&quot;</span>, NULL), array(<span class="stringliteral">&#39;\\\\&#39;</span>, <span class="stringliteral">&#39;\\0&#39;</span>, <span class="stringliteral">&#39;\\n&#39;</span>, <span class="stringliteral">&#39;\\r&#39;</span>, <span class="stringliteral">&#39;\\&quot;&#39;</span>, <span class="stringliteral">&#39;\\Z&#39;</span>,0), $inp);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $inp;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+======================================================+</span></div>
<div class="line"><span class="comment">//*argument $inserts is an associative array of column names and value-data </span></div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_linda.html#a190c686da9f77d10964e06f0480c9b44">createInsert</a>($fields, $inserts) {</div>
<div class="line">        <span class="comment">//call our custom escape function on the data-values</span></div>
<div class="line"></div>
<div class="line">        $values = array_map(array($this, <span class="stringliteral">&quot;sanitize&quot;</span>), array_values($inserts));</div>
<div class="line">        $values = array_map(array($this, <span class="stringliteral">&quot;string_or_int&quot;</span>), array_values($inserts));</div>
<div class="line">        $keys = array_keys($inserts);</div>
<div class="line"></div>
<div class="line">        $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;INSERT INTO &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot; (&quot;</span> . implode(<span class="charliteral">&#39;,&#39;</span>, $fields) . <span class="stringliteral">&quot;) VALUES (&quot;</span> . implode(<span class="stringliteral">&quot;, &quot;</span>, $values) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+==================================================================+</span></div>
<div class="line">    <span class="comment">//this method checks if a value is a string and quotes it if it is</span></div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">function</span> <a name="a30"></a><a class="code" href="class_linda.html#a9aa9a275e880b4446ec390cc2ba351cd">string_or_int</a>($val) {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!is_numeric($val)) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&#39;&quot;</span> . $val . <span class="stringliteral">&quot;&#39;&quot;</span>; <span class="comment">//add quotes</span></div>
<div class="line">        }</div>
<div class="line">       </div>
<div class="line">        <span class="keywordflow">return</span> $val;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+=========================================================================================================</span></div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_linda.html#aeb66ebf99ca730ea67c612735a6576b4">queryBuilder</a>($mode, $fields, <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>) {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">switch</span> ($mode) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;select&quot;</span>:</div>
<div class="line"></div>
<div class="line">                </div>
<div class="line">                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; SELECT &quot;</span> . ( is_string($fields) ? <span class="stringliteral">&quot;* &quot;</span> : implode(<span class="stringliteral">&quot;,&quot;</span>, $fields)) . <span class="stringliteral">&quot; FROM &quot;</span> . $this-&gt;TABLE_MODEL;</div>
<div class="line"></div>
<div class="line">                <span class="comment">//handle joins  </span></div>
<div class="line">              </div>
<div class="line">                <span class="keywordflow">foreach</span> (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a> as $index =&gt; $item) {<span class="comment">//loop through each inner join array argument</span></div>
<div class="line">                    $join_count = 1; <span class="comment">//</span></div>
<div class="line">                    <span class="keywordflow">if</span> (FALSE !== strpos($index, <span class="stringliteral">&quot;innerJoinGroup&quot;</span>)) {</div>
<div class="line"></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; AS T1 &quot;</span>;</div>
<div class="line">                        <span class="keywordflow">foreach</span> ($item as $key =&gt; $val) {</div>
<div class="line">                            $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot;INNER JOIN &quot;</span> . $val[<span class="stringliteral">&#39;table&#39;</span>] . <span class="stringliteral">&quot; AS T&quot;</span> . ( ++$join_count) . <span class="stringliteral">&quot; ON T1.&quot;</span> . $val[<span class="stringliteral">&#39;conditional_column_a&#39;</span>] . <span class="stringliteral">&quot; = T&quot;</span> . ($join_count) . <span class="stringliteral">&quot;.&quot;</span> . $val[<span class="stringliteral">&#39;conditional_column_b&#39;</span>] . <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">//handle where clause</span></div>
<div class="line">                $where_clause_counter = 1;</div>
<div class="line">                $in_where_clause = 1;</div>
<div class="line">                <span class="keywordflow">foreach</span> (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a> as $index =&gt; $item) {<span class="comment">//loop through each where Groups</span></div>
<div class="line">                    </div>
<div class="line">                    <span class="keywordflow">if</span> (FALSE !== strpos($index, <span class="stringliteral">&quot;whereGroup&quot;</span>)) { <span class="comment">//HANDLE WHERE CLUASE </span></div>
<div class="line">                        </div>
<div class="line">                        <span class="keywordflow">if</span> ($where_clause_counter++ === 1)</div>
<div class="line">                            $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; WHERE(&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">foreach</span> ($item as $key =&gt; $whereGroupIndex) {<span class="comment">//loop through each where Groups</span></div>
<div class="line">                            $nextComparisonOp = isset($whereGroupIndex[<span class="stringliteral">&quot;nextOp&quot;</span>]) ? $whereGroupIndex[<span class="stringliteral">&quot;nextOp&quot;</span>] : <span class="stringliteral">&quot;AND&quot;</span>;</div>
<div class="line">                            <span class="keywordflow">if</span> ($in_where_clause &gt; 1) {</div>
<div class="line">                                $in_where_clause = 1;</div>
<div class="line">                            }</div>
<div class="line"></div>
<div class="line">                            <span class="keywordflow">foreach</span> ($whereGroupIndex as $key2 =&gt; $val2) {<span class="comment">//loop through each whereGroups</span></div>
<div class="line">                                <span class="keywordflow">if</span> ($key2 !== <span class="stringliteral">&quot;comparisonOp&quot;</span> &amp;&amp; $key2 !== <span class="stringliteral">&quot;nextOp&quot;</span>) {</div>
<div class="line">                                    <span class="keywordflow">if</span> ($in_where_clause++ &gt; 1)</div>
<div class="line">                                        $this-&gt;CURRENT_QUERY .= isset($whereGroupIndex[<span class="stringliteral">&#39;comparisonOp&#39;</span>]) ? <span class="stringliteral">&quot; &quot;</span> . $whereGroupIndex[<span class="stringliteral">&#39;comparisonOp&#39;</span>] . <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot; AND &quot;</span>;</div>
<div class="line"></div>
<div class="line">                                    <span class="keywordflow">if</span> ($key2 !== <span class="stringliteral">&quot;operator&quot;</span>) <span class="comment">//this key shouldnt be added as a value</span></div>
<div class="line">                                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; &quot;</span> . $key2 . <span class="stringliteral">&quot; &quot;</span> . (isset($val2[<span class="stringliteral">&#39;operator&#39;</span>]) ? $val2[<span class="stringliteral">&#39;operator&#39;</span>] : <span class="stringliteral">&quot;=&quot;</span>) . <span class="stringliteral">&quot; &quot;</span> . $this-&gt;<a class="code" href="class_linda.html#a0cee7c433eda5db6e7610d4e0dcedf99">sanitize</a>($this-&gt;<a class="code" href="class_linda.html#a9aa9a275e880b4446ec390cc2ba351cd">string_or_int</a>($val2 [<span class="stringliteral">&#39;value&#39;</span>]));</div>
<div class="line">                                };</div>
<div class="line">                            }</div>
<div class="line"></div>
<div class="line">                            $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; )&quot;</span>;</div>
<div class="line">                            <span class="keywordflow">if</span> (next($item))</div>
<div class="line">                                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; &quot;</span> . $nextComparisonOp . <span class="stringliteral">&quot; (&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                </div>
<div class="line"> </div>
<div class="line">                <span class="comment">//handle where_in_*</span></div>
<div class="line">                <span class="keywordflow">if</span> (isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>])) {</div>
<div class="line"></div>
<div class="line">                    $where_operator = isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;operator&#39;</span>]) ? <span class="stringliteral">&quot; &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;operator&#39;</span>] . <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot; AND &quot;</span>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> ($where_clause_counter++ &gt; 1) {</div>
<div class="line"></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= $where_operator . <span class="stringliteral">&quot; &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;fieldName&#39;</span>] . <span class="stringliteral">&quot; IN (&quot;</span> .</div>
<div class="line">                                (isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>]) ? <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] : <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;options&#39;</span>]) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; WHERE &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;fieldName&#39;</span>] . <span class="stringliteral">&quot; IN (&quot;</span> .</div>
<div class="line">                                (isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>]) ? <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] : <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;options&#39;</span>]) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;limit&#39;</span>])) {</div>
<div class="line">                    $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; LIMIT &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;limit&#39;</span>][<span class="stringliteral">&#39;index&#39;</span>];</div>
<div class="line">                    $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot;,  &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;limit&#39;</span>][<span class="stringliteral">&#39;count&#39;</span>];</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; LIMIT &quot;</span>. <a class="code" href="class_linda.html#a803cce07cc3e3f9937b6e5faba4100fe">$this-&gt;DEFAULT_START_INDEX</a>;</div>
<div class="line">                    $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot;, &quot;</span>. <a class="code" href="class_linda.html#a97365f1875db5efbdefc5faa71249ff1">$this-&gt;DEFAULT_LIMIT</a>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line">              </div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;update&quot;</span>:</div>
<div class="line"></div>
<div class="line">                $update_column_count = 1;</div>
<div class="line">                $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;UPDATE &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot; SET &quot;</span>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">foreach</span> ($fields as $key =&gt; $val) {</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> ($update_column_count++ &gt; 1)</div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot;,&quot;</span>; <span class="comment">//seperate the next row feild/value</span></div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> (is_array($val))</div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= $key . <span class="stringliteral">&quot; = (&quot;</span> . $val[0] . <span class="stringliteral">&quot; )&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= $key . <span class="stringliteral">&quot; = &quot;</span> . $this-&gt;<a class="code" href="class_linda.html#a0cee7c433eda5db6e7610d4e0dcedf99">sanitize</a>($this-&gt;<a class="code" href="class_linda.html#a9aa9a275e880b4446ec390cc2ba351cd">string_or_int</a>(($val))) . <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                 <span class="comment">//handle where clause</span></div>
<div class="line">                $where_clause_counter = 1;</div>
<div class="line">                $in_where_clause = 1;</div>
<div class="line">                <span class="keywordflow">foreach</span> (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a> as $index =&gt; $item) {<span class="comment">//loop through each where Groups</span></div>
<div class="line">                    <span class="keywordflow">if</span> (FALSE !== strpos($index, <span class="stringliteral">&quot;whereGroup&quot;</span>)) { <span class="comment">//HANDLE WHERE CLUASE </span></div>
<div class="line">                        <span class="keywordflow">if</span> ($where_clause_counter++ === 1)</div>
<div class="line">                            $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; WHERE(&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">foreach</span> ($item as $key =&gt; $whereGroupIndex) {<span class="comment">//loop through each where Groups</span></div>
<div class="line">                            $nextComparisonOp = isset($whereGroupIndex[<span class="stringliteral">&quot;nextOp&quot;</span>]) ? $whereGroupIndex[<span class="stringliteral">&quot;nextOp&quot;</span>] : <span class="stringliteral">&quot;AND&quot;</span>;</div>
<div class="line">                            <span class="keywordflow">if</span> ($in_where_clause &gt; 1) {</div>
<div class="line">                                $in_where_clause = 1;</div>
<div class="line">                            }</div>
<div class="line"></div>
<div class="line">                            <span class="keywordflow">foreach</span> ($whereGroupIndex as $key2 =&gt; $val2) {<span class="comment">//loop through each whereGroups</span></div>
<div class="line">                                <span class="keywordflow">if</span> ($key2 !== <span class="stringliteral">&quot;comparisonOp&quot;</span> &amp;&amp; $key2 !== <span class="stringliteral">&quot;nextOp&quot;</span>) {</div>
<div class="line">                                    <span class="keywordflow">if</span> ($in_where_clause++ &gt; 1)</div>
<div class="line">                                        $this-&gt;CURRENT_QUERY .= isset($whereGroupIndex[<span class="stringliteral">&#39;comparisonOp&#39;</span>]) ? <span class="stringliteral">&quot; &quot;</span> . $whereGroupIndex[<span class="stringliteral">&#39;comparisonOp&#39;</span>] . <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot; AND &quot;</span>;</div>
<div class="line"></div>
<div class="line">                                    <span class="keywordflow">if</span> ($key2 !== <span class="stringliteral">&quot;operator&quot;</span>) <span class="comment">//this key shouldnt be added as a value</span></div>
<div class="line">                                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; &quot;</span> . $key2 . <span class="stringliteral">&quot; &quot;</span> . (isset($val2[<span class="stringliteral">&#39;operator&#39;</span>]) ? $val2[<span class="stringliteral">&#39;operator&#39;</span>] : <span class="stringliteral">&quot;=&quot;</span>) . <span class="stringliteral">&quot; &quot;</span> . $this-&gt;<a class="code" href="class_linda.html#a0cee7c433eda5db6e7610d4e0dcedf99">sanitize</a>($this-&gt;<a class="code" href="class_linda.html#a9aa9a275e880b4446ec390cc2ba351cd">string_or_int</a>($val2 [<span class="stringliteral">&#39;value&#39;</span>]));</div>
<div class="line">                                };</div>
<div class="line">                            }</div>
<div class="line"></div>
<div class="line">                            $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; )&quot;</span>;</div>
<div class="line">                            <span class="keywordflow">if</span> (next($item))</div>
<div class="line">                                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; &quot;</span> . $nextComparisonOp . <span class="stringliteral">&quot; (&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">//handle where_in_*</span></div>
<div class="line">                <span class="keywordflow">if</span> (isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>])) {</div>
<div class="line">                    $where_operator = isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;operator&#39;</span>]) ? <span class="stringliteral">&quot; &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;operator&#39;</span>] . <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot; AND &quot;</span>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> ($where_clause_counter++ &gt; 1) {</div>
<div class="line"></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= $where_operator . <span class="stringliteral">&quot; &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;fieldName&#39;</span>] . <span class="stringliteral">&quot; IN (&quot;</span> .</div>
<div class="line">                                (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] ? <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] : <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;options&#39;</span>]) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; WHERE &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;fieldName&#39;</span>] . <span class="stringliteral">&quot; IN (&quot;</span> .</div>
<div class="line">                                (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] ? <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] : <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;options&#39;</span>]) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; ;&quot;</span>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <span class="stringliteral">&quot;delete&quot;</span>:</div>
<div class="line"></div>
<div class="line">                $delete_column_count = 1;</div>
<div class="line">                $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;DELETE FROM &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"></div>
<div class="line">                 <span class="comment">//handle where clause</span></div>
<div class="line">                $where_clause_counter = 1;</div>
<div class="line">                $in_where_clause = 1;</div>
<div class="line">                <span class="keywordflow">foreach</span> (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a> as $index =&gt; $item) {<span class="comment">//loop through each where Groups</span></div>
<div class="line">                    <span class="keywordflow">if</span> (FALSE !== strpos($index, <span class="stringliteral">&quot;whereGroup&quot;</span>)) { <span class="comment">//HANDLE WHERE CLUASE </span></div>
<div class="line">                        <span class="keywordflow">if</span> ($where_clause_counter++ === 1)</div>
<div class="line">                            $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; WHERE(&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">foreach</span> ($item as $key =&gt; $whereGroupIndex) {<span class="comment">//loop through each where Groups</span></div>
<div class="line">                            $nextComparisonOp = isset($whereGroupIndex[<span class="stringliteral">&quot;nextOp&quot;</span>]) ? $whereGroupIndex[<span class="stringliteral">&quot;nextOp&quot;</span>] : <span class="stringliteral">&quot;AND&quot;</span>;</div>
<div class="line">                            <span class="keywordflow">if</span> ($in_where_clause &gt; 1) {</div>
<div class="line">                                $in_where_clause = 1;</div>
<div class="line">                            }</div>
<div class="line"></div>
<div class="line">                            <span class="keywordflow">foreach</span> ($whereGroupIndex as $key2 =&gt; $val2) {<span class="comment">//loop through each whereGroups</span></div>
<div class="line">                                <span class="keywordflow">if</span> ($key2 !== <span class="stringliteral">&quot;comparisonOp&quot;</span> &amp;&amp; $key2 !== <span class="stringliteral">&quot;nextOp&quot;</span>) {</div>
<div class="line">                                    <span class="keywordflow">if</span> ($in_where_clause++ &gt; 1)</div>
<div class="line">                                        $this-&gt;CURRENT_QUERY .= isset($whereGroupIndex[<span class="stringliteral">&#39;comparisonOp&#39;</span>]) ? <span class="stringliteral">&quot; &quot;</span> . $whereGroupIndex[<span class="stringliteral">&#39;comparisonOp&#39;</span>] . <span class="stringliteral">&quot; &quot;</span> : <span class="stringliteral">&quot; AND &quot;</span>;</div>
<div class="line"></div>
<div class="line">                                    <span class="keywordflow">if</span> ($key2 !== <span class="stringliteral">&quot;operator&quot;</span>) <span class="comment">//this key shouldnt be added as a value</span></div>
<div class="line">                                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; &quot;</span> . $key2 . <span class="stringliteral">&quot; &quot;</span> . (isset($val2[<span class="stringliteral">&#39;operator&#39;</span>]) ? $val2[<span class="stringliteral">&#39;operator&#39;</span>] : <span class="stringliteral">&quot;=&quot;</span>) . <span class="stringliteral">&quot; &quot;</span> . $this-&gt;<a class="code" href="class_linda.html#a0cee7c433eda5db6e7610d4e0dcedf99">sanitize</a>($this-&gt;<a class="code" href="class_linda.html#a9aa9a275e880b4446ec390cc2ba351cd">string_or_int</a>($val2 [<span class="stringliteral">&#39;value&#39;</span>]));</div>
<div class="line">                                };</div>
<div class="line">                            }</div>
<div class="line"></div>
<div class="line">                            $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; )&quot;</span>;</div>
<div class="line">                            <span class="keywordflow">if</span> (next($item))</div>
<div class="line">                                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; &quot;</span> . $nextComparisonOp . <span class="stringliteral">&quot; (&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                </div>
<div class="line">                <span class="comment">//handle where_in_*</span></div>
<div class="line">                <span class="keywordflow">if</span> (isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>])) {</div>
<div class="line"></div>
<div class="line">                    $where_operator = isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;operator&#39;</span>]) ? <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;operator&#39;</span>] : <span class="stringliteral">&quot; AND &quot;</span>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> ($where_clause_counter++ &gt; 1) {</div>
<div class="line"></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= $where_operator . <span class="stringliteral">&quot; &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;fieldName&#39;</span>] . <span class="stringliteral">&quot; IN (&quot;</span> .</div>
<div class="line">                                (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] ? <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] : <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;options&#39;</span>]) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line"></div>
<div class="line">                        $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; WHERE &quot;</span> . <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;fieldName&#39;</span>] . <span class="stringliteral">&quot; IN (&quot;</span> .</div>
<div class="line">                                (<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] ? <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;query&#39;</span>] : <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;where_in&#39;</span>][<span class="stringliteral">&#39;options&#39;</span>]) . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (isset(<a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;LIMIT&#39;</span>])) {</div>
<div class="line"></div>
<div class="line">                    $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot; LIMIT &quot;</span> . (int) <a class="code" href="class_linda.html#aea7d038e46660f55592569906cf09494">$queryConfig</a>[<span class="stringliteral">&#39;LIMIT&#39;</span>];</div>
<div class="line">                }</div>
<div class="line">                $this-&gt;CURRENT_QUERY .= <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===========================================================================================</span></div>
<div class="line">    <span class="comment">//run the query and set the return object</span></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>() {</div>
<div class="line">        $this-&gt;CURRENT_QUERY = str_replace(<span class="stringliteral">&quot;NOW()&quot;</span>, <a name="a31"></a><a class="code" href="class_string_helper.html#a969afa28cd7ea07c4ff799d3cb79c6b3">StringHelper::toYMD</a>(<span class="stringliteral">&quot;now&quot;</span>), $this-&gt;CURRENT_QUERY);</div>
<div class="line">        $this-&gt;CURRENT_QUERY = str_replace(<span class="stringliteral">&quot;TIME()&quot;</span>, <a name="a32"></a><a class="code" href="class_string_helper.html#a75a238a5d05b6bfd7f5f2317c3243147">StringHelper::toYMDHMS</a>(<span class="stringliteral">&quot;now&quot;</span>), $this-&gt;CURRENT_QUERY);</div>
<div class="line">        $this-&gt;DAL_ERROR = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">        $this-&gt;lastAffectedRowCount = 0;</div>
<div class="line">        </div>
<div class="line">       <span class="comment">// echo &quot;&lt;br/&gt;&lt;br/&gt;&quot;.$this-&gt;CURRENT_QUERY.&quot;&lt;br/&gt;&lt;br/&gt;&quot;;</span></div>
<div class="line">        $stmnt;</div>
<div class="line">        </div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">try</span> {</div>
<div class="line">            <span class="keywordflow">if</span> (($stmnt = $this-&gt;DB_LINK-&gt;query($this-&gt;CURRENT_QUERY, PDO::FETCH_ASSOC))) {</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> ($stmnt-&gt;rowCount())</div>
<div class="line">                    $this-&gt;lastAffectedRowCount = $stmnt-&gt;rowCount();</div>
<div class="line">               </div>
<div class="line"></div>
<div class="line">                $this-&gt;resultObject = $stmnt-&gt;fetchAll();</div>
<div class="line">                </div>
<div class="line">                <span class="comment">//set the number of rows returned for select ops</span></div>
<div class="line">                 <span class="keywordflow">if</span> (!$this-&gt;lastAffectedRowCount &amp;&amp; <a name="a33"></a><a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject))</div>
<div class="line">                    $this-&gt;lastAffectedRowCount = <a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject) || $this-&gt;lastAffectedRowCount)</div>
<div class="line">                    ;</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    $this-&gt;resultObject = NULL;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">catch</span> (PDOException $e) {</div>
<div class="line">              </div>
<div class="line">            $this-&gt;DAL_ERROR = $e-&gt;getMessage();</div>
<div class="line">            $this-&gt;resultObject = NULL;</div>
<div class="line">           <span class="comment">// echo $this-&gt;DAL_ERROR;</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($columnName, $val, $operator = <span class="stringliteral">&quot;=&quot;</span>) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;SELECT COUNT(*) AS DAL_counter FROM &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot; WHERE &quot;</span> . $columnName . <span class="stringliteral">&quot; &quot;</span> . $operator . <span class="stringliteral">&quot; &quot;</span> . $val . <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a name="a34"></a><a class="code" href="class_linda.html#a4eb450d15a632938197abf1ef88252f1">_getAll</a>()[0][<span class="stringliteral">&#39;DAL_counter&#39;</span>];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a35"></a><a class="code" href="class_linda.html#a9405f06abe08887d915b8c0a98885cb2">max_in_column</a>($columnName) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;SELECT MAX(&quot;</span> . $fieldName . <span class="stringliteral">&quot;) AS DAL_max FROM &quot;</span> . <a class="code" href="class_linda.html#a486c281995ea6cdb9fb0367b6e260b76">$this-&gt;TABLE_MODEL</a>;</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_linda.html#a4eb450d15a632938197abf1ef88252f1">_getAll</a>()[0][<span class="stringliteral">&#39;DAL_max&#39;</span>];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a36"></a><a class="code" href="class_linda.html#ace93ec905a1eba8f431c1d6bb279ac20">maxRow</a>($fieldName) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;SELECT * FROM &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot; WHERE &quot;</span> . $fieldName . <span class="stringliteral">&quot; = (SELECT MAX(&quot;</span> . $fieldName . <span class="stringliteral">&quot;) FROM &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_linda.html#a4eb450d15a632938197abf1ef88252f1">_getAll</a>()[0];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a37"></a><a class="code" href="class_linda.html#a5d5bc46bb36b6baae7b5967bdadb9559">min_in_column</a>($fieldName) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;SELECT MIN(&quot;</span> . $fieldName . <span class="stringliteral">&quot;) AS DAL_min FROM &quot;</span> . <a class="code" href="class_linda.html#a486c281995ea6cdb9fb0367b6e260b76">$this-&gt;TABLE_MODEL</a>;</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_linda.html#a4eb450d15a632938197abf1ef88252f1">_getAll</a>()[0][<span class="stringliteral">&#39;DAL_min&#39;</span>];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a38"></a><a class="code" href="class_linda.html#a419c5ac44cf2f26a11a951e956279552">minRow</a>($fieldName) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;SELECT * FROM &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot; WHERE &quot;</span> . $fieldName . <span class="stringliteral">&quot; = (SELECT MIN(&quot;</span> . $fieldName . <span class="stringliteral">&quot;) FROM &quot;</span> . $this-&gt;TABLE_MODEL . <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_linda.html#a4eb450d15a632938197abf1ef88252f1">_getAll</a>()[0];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a39"></a><a class="code" href="class_linda.html#ab39eb2457d23f38ac50e0af64a55f6e9">sum</a>($fieldName) {</div>
<div class="line"></div>
<div class="line">        $this-&gt;CURRENT_QUERY = <span class="stringliteral">&quot;SELECT SUM(&quot;</span> . $fieldName . <span class="stringliteral">&quot;) AS DAL_sum FROM &quot;</span> . <a class="code" href="class_linda.html#a486c281995ea6cdb9fb0367b6e260b76">$this-&gt;TABLE_MODEL</a>;</div>
<div class="line">        $this-&gt;<a class="code" href="class_linda.html#ad2e4fa0b57c9acdf15cd932346381af5">runQuery</a>();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_linda.html#a4eb450d15a632938197abf1ef88252f1">_getAll</a>()[0][<span class="stringliteral">&#39;DAL_sum&#39;</span>];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_linda.html#a4eb450d15a632938197abf1ef88252f1">_getAll</a>() {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject)) {</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="class_linda.html#a64270a514fbca17fe7347df6320fc4ba">$this-&gt;resultObject</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//+===================================================================================================</span></div>
<div class="line"><span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a40"></a><a class="code" href="class_linda.html#adea476fa3872b0c248c52497aca5d643">_getRowAtIndex</a>($index) {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;resultObject &amp;&amp; <a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject) &gt;= $index)</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;resultObject[$index];</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a41"></a><a class="code" href="class_linda.html#a03ad44ccf4a8544166243895b7ad7940">_numRows</a>() {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="class_linda.html#a038edab690e03aff9c70a1f63c06f27e">$this-&gt;lastAffectedRowCount</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a42"></a><a class="code" href="class_linda.html#aefb9c60f595cc5439c3d84dfae3cd988">_peek</a>() {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;resultObject)</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;resultObject(0);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a43"></a><a class="code" href="class_linda.html#ae0ad8e92fb00654efdd1366aebcd834c">_tail</a>() {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;resultObject)</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;resultObject(<a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject) - 1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a44"></a><a class="code" href="class_linda.html#aba23584e7eed05b55f294a5f251122a3">_even</a>() {</div>
<div class="line">        $resultArray = array();</div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;resultObject) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> ($i = 0; $i &lt; <a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject); $i++)</div>
<div class="line">                <span class="keywordflow">if</span> ($i % 2 === 0)</div>
<div class="line">                    $resultArray[] = $this-&gt;resultObject[$i];</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $resultArray;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a45"></a><a class="code" href="class_linda.html#aa2ca4d77826739df715242ec4fd89653">_odd</a>() {</div>
<div class="line"></div>
<div class="line">        $resultArray = array();</div>
<div class="line">        <span class="keywordflow">if</span> ($this-&gt;resultObject) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> ($i = 0; $i &lt; <a class="code" href="class_linda.html#a3292920004f4f0eb71524e2e871fd9cc">count</a>($this-&gt;resultObject); $i++)</div>
<div class="line">                <span class="keywordflow">if</span> ($i &amp; 2 !== 0)</div>
<div class="line">                    $resultArray[] = $this-&gt;resultObject[$i];</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> $resultArray;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">function</span> <a name="a46"></a><a class="code" href="class_linda.html#a421831a265621325e1fdd19aace0c758">__destruct</a>() {</div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
